<!DOCTYPE HTML>

<html>
<head>
<title>Registro</title>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="assets/css/main.css" />

<!--[if lte IE 8]><script src="assets/js/ie/html5shiv.js"></script><![endif]-->
<!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
<!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
</head>

<body class="contact">
<div id="page-wrapper"> 
  
  <!-- Header -->
  <header id="header">
    <h1 id="logo"><a href="Login.html">Chat <span>Los Desalmados</span></a></h1>
    <nav id="nav">
      <ul>
        <li><a href="Login.html" class="button special">Volver</a></li>
      </ul>
    </nav>
  </header>
  
  <!-- Main -->
  <article id="main"> 
    
    <!-- One -->
    <section class="wrapper style4 special container 75%"> 
      
      <!-- Content -->
      <div class="content">
        <div class="row 50%">
          <div class="6u 12u(mobile)">
            <input type="text" name="nombre" placeholder="Nombre" />
          </div>
          <div class="6u 12u(mobile)">
            <input type="text" name="apellido1" placeholder="Primer Apellido" />
          </div>
        </div>
        <div class="row 50%">
          <div class="6u 12u(mobile)">
            <input type="text" name="apellido2" placeholder="Segundo Apellido" />
          </div>
          <div class="6u 12u(mobile)">
            <input type="text" name="correo" placeholder="Correo Electrónico" />
          </div>
        </div>
        <div class="row 50%">
          <div class="6u 12u(mobile)">
            <input type="text" name="usuario" placeholder="Usuario" />
          </div>
          <div class="6u 12u(mobile)">
            <input type="date" name="fecha" placeholder="Fecha de nacimiento" />
          </div>
        </div>
        <div class="row 50%">
          <div class="6u 12u(mobile)">
            <input type="password" name="contraseña1" placeholder="Contraseña" />
          </div>
          <div class="6u 12u(mobile)">
            <input type="password" name="contraseña2" placeholder="Confirmar Contraseña" />
          </div>
        </div>
        <form action="" method="post" enctype="multipart/form-data" onsubmit="AJAXSubmit(this); return false;">
          <div class="row 50%">
            <div class="12u"> 
              <img id="uploaded">
              <input id="browse" type="file" name="file" type="hidden" onchange="Handlechange();">
              <input id="filename" type="hidden" readonly>
              <input name="upload_preset" value="a3b5ttv5" type="hidden">
              <div id="results" type="hidden"></div>
            </div>
          </div>
          <div class="row 50%">
            <div class="6u 12u(mobile)">
              <input id="fakeBrowse" type="button" value="Abrir imagen" onclick="HandleBrowseClick();">
            </div>
            <div class="6u 12u(mobile)">
              <p>
                <input type="submit" value="Cargar imagen">
              </p>
            </div>
          </div>
        </form>
        <div class="row 50%">
          <div class="12u">
            <input id="btnEnviar" type="button" value="Crear Usuario">
          </div>
          <div class="12u">
            <label id="IDMensaje"></label>
          </div>
        </div>
        <script>
			function HandleBrowseClick () {
				var fileinput = document.getElementById("browse");
				fileinput.click();	
			}

			function Handlechange () {
				var fileinput = document.getElementById("browse");
				var textinput = document.getElementById("filename");
				textinput.value = fileinput.value;
			}

			window.ajaxSuccess = function () {
				response = JSON.parse(this.responseText);
				console.log("ajaxSuccess", typeof this.responseText);
				console.log(response)
				console.log('URL', response["secure_url"])
				document.getElementById('uploaded').setAttribute("src", response["secure_url"]);
				document.getElementById('results').innerText = response["secure_url"];
			}

			window.AJAXSubmit = function (formElement) {
				console.log("starting AJAXSubmit");
				if (!formElement.action) { return; }
				var xhr = new XMLHttpRequest();
				xhr.onload = ajaxSuccess;
				xhr.open("post", "https://api.cloudinary.com/v1_1/do6pbylj8/image/upload");
				xhr.send(new FormData(formElement));
			}
		</script> 
      </div>
    </section>
  </article>
</div>

<!-- Scripts --> 
<script src="assets/js/jquery.min.js"></script> 
<script src="assets/js/jquery.dropotron.min.js"></script> 
<script src="assets/js/jquery.scrolly.min.js"></script> 
<script src="assets/js/jquery.scrollgress.min.js"></script> 
<script src="assets/js/skel.min.js"></script> 
<script src="assets/js/util.js"></script> 
<!--[if lte IE 8]><script src="assets/js/ie/respond.min.js"></script><![endif]--> 
<script src="assets/js/main.js"></script>
</body>
</html>